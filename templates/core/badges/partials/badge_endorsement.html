{%include 'show_message.html'%}

<div id="badge-endorsment-form">
    <h2>Endorser un badge</h2>
    <form>
        {# Structure who endorsed #}
        <select id="structure-input" class="form-select mt-2" name="structure">
            <option>--- Sélectionnez une Structure ---</option>>
            {%for structure in structures %}
                <option {% if defaults.structure == structure.pk|stringformat:"s"  %} selected {%endif%} value="{{structure.pk}}">
                    {{structure.name}}
                </option>
            {%endfor%}
        </select>

        {% if errors.structure %}
            <p class="error">{{errors.structure.0}}</p>
        {% endif %}


        {# Additional notes #}
        <label for="notes-input" class=" mt-2">Notes supplémentaire :</label>
        <textarea id="notes-input" class="form-control mt-2" name="notes">{% if defaults.notes %}{{defaults.notes}}{%endif%}</textarea>
        {% if errors.notes %}
            <p class="error">{{errors.notes.0}}</p>
        {% endif %}

        {# User pk#}
        <input type="hidden" name="endorsed_by" value="{{request.user.pk}}">
        <input type="hidden" name="badge" value="{{ badge_pk }}">

        <button class="btn btn-primary"
         hx-post="{% url 'core:badge-endorse' badge_pk %}"
         hx-target="#badge-endorsment-form"
         hx-swap="innerHTML">
            Envoyer</button>

        <p class="btn btn-danger" onclick="hidepopup()">Annuler</p>
    </form>
</div>
